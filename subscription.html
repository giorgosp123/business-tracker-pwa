<!DOCTYPE html
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Premium Συνδρομή - Business Tracker</title>
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
            padding: 20px 0;
            box-sizing: border-box;
        }

        /* Modern Glassmorphism Container */
        .subscription-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 50px;
            box-shadow: 
                0 8px 32px 0 rgba(31, 38, 135, 0.37),
                inset 0 0 60px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.18);
            max-width: 550px;
            width: 90%;
            text-align: center;
            position: relative;
            overflow: visible;
            animation: containerEntrance 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
            margin: 20px auto;
        }

        @keyframes containerEntrance {
            from {
                opacity: 0;
                transform: translateY(50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* Animated gradient border */
        .subscription-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2, #ff6b6b, #4ecdc4, #667eea);
            background-size: 200% 100%;
            animation: gradientShift 3s ease infinite;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Enhanced Logo with pulse effect */
        .logo {
            width: 90px;
            height: 90px;
            margin: 0 auto 25px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 35px;
            color: white;
            box-shadow: 
                0 15px 35px rgba(102, 126, 234, 0.4),
                0 5px 15px rgba(0, 0, 0, 0.1);
            animation: logoPulse 2s ease-in-out infinite;
            position: relative;
        }

        .logo::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            opacity: 0.3;
            animation: logoRipple 2s ease-out infinite;
        }

        @keyframes logoPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes logoRipple {
            0% {
                transform: scale(1);
                opacity: 0.3;
            }
            100% {
                transform: scale(1.4);
                opacity: 0;
            }
        }

        /* Modern Typography */
        h1 {
            color: white;
            margin-bottom: 15px;
            font-size: 32px;
            font-weight: 800;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            letter-spacing: -0.5px;
        }

        .subtitle {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 35px;
            font-size: 18px;
            font-weight: 400;
            line-height: 1.5;
        }

        /* Enhanced Plan Card */
        .plan-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 35px;
            margin: 25px 0;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.1),
                0 1px 3px rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            overflow: hidden;
        }

        .plan-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s ease;
        }

        .plan-card:hover {
            transform: translateY(-8px);
            box-shadow: 
                0 30px 60px rgba(102, 126, 234, 0.15),
                0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .plan-card:hover::before {
            left: 100%;
        }

        /* Enhanced Popular Badge */
        .popular-badge {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 10px 25px;
            border-radius: 25px;
            font-size: 13px;
            font-weight: 700;
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.3);
            animation: badgeGlow 2s ease-in-out infinite alternate;
        }

        @keyframes badgeGlow {
            from { box-shadow: 0 8px 20px rgba(255, 107, 107, 0.3); }
            to { box-shadow: 0 8px 25px rgba(255, 107, 107, 0.6); }
        }

        /* Enhanced Typography & Pricing */
        .plan-name {
            font-size: 28px;
            font-weight: 800;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
            letter-spacing: -0.5px;
        }

        .plan-price {
            font-size: 42px;
            font-weight: 900;
            color: #667eea;
            margin-bottom: 8px;
            position: relative;
            display: inline-block;
        }

        .plan-price::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 2px;
        }

        .plan-period {
            color: #7f8c8d;
            margin-bottom: 25px;
            font-size: 16px;
            font-weight: 500;
        }

        /* Enhanced Free Trial Badge */
        .free-trial {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
            padding: 12px 25px;
            border-radius: 30px;
            margin-bottom: 30px;
            font-weight: 700;
            font-size: 15px;
            display: inline-block;
            box-shadow: 0 8px 20px rgba(46, 204, 113, 0.3);
            animation: trialPulse 3s ease-in-out infinite;
            position: relative;
            overflow: hidden;
        }

        .free-trial::before {
            content: '✨';
            position: absolute;
            left: -20px;
            animation: sparkle 2s linear infinite;
        }

        @keyframes trialPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes sparkle {
            0% { left: -20px; opacity: 0; }
            50% { opacity: 1; }
            100% { left: calc(100% + 20px); opacity: 0; }
        }

        /* Enhanced Features List */
        .features-list {
            text-align: left;
            margin-bottom: 35px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 12px;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .feature-item:hover {
            background: rgba(255, 255, 255, 0.8);
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .feature-icon {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 14px;
            flex-shrink: 0;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            animation: iconFloat 3s ease-in-out infinite;
        }

        @keyframes iconFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }

        .feature-text {
            color: #2c3e50;
            font-size: 15px;
            line-height: 1.5;
            font-weight: 500;
        }

        .feature-text strong {
            color: #667eea;
            font-weight: 700;
        }

        /* Enhanced Buttons */
        .cta-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 45px;
            border-radius: 50px;
            font-size: 17px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4);
            width: 100%;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .cta-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 50px rgba(102, 126, 234, 0.6);
        }

        .cta-button:hover::before {
            left: 100%;
        }

        .cta-button:active {
            transform: translateY(-1px);
        }

        .cancel-button {
            background: transparent;
            color: #e74c3c;
            border: 2px solid #e74c3c;
            padding: 15px 35px;
            border-radius: 50px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        .cancel-button:hover {
            background: #e74c3c;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(231, 76, 60, 0.3);
        }

        .back-button {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 15px 35px;
            border-radius: 50px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            backdrop-filter: blur(10px);
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 255, 255, 0.1);
        }

        /* Modern Subscription Status */
        .subscription-status {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            color: #155724;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 25px;
            border: none;
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.2);
            display: none;
            position: relative;
            overflow: hidden;
        }

        .subscription-status::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(180deg, #28a745, #20c997);
        }

        .subscription-status.active {
            display: block;
            animation: statusSlideIn 0.5s ease-out;
        }

        @keyframes statusSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Modern Notification System */
        .notification {
            position: fixed;
            top: 30px;
            right: 30px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            color: #333;
            padding: 20px 25px;
            border-radius: 15px;
            box-shadow: 
                0 20px 25px -5px rgba(0, 0, 0, 0.1),
                0 10px 10px -5px rgba(0, 0, 0, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 10000;
            transform: translateX(400px);
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            max-width: 350px;
            min-width: 300px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-left: 4px solid #2ecc71;
        }

        .notification.error {
            border-left: 4px solid #e74c3c;
        }

        .notification.warning {
            border-left: 4px solid #f39c12;
        }

        .notification.info {
            border-left: 4px solid #3498db;
        }

        .notification .notification-content {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .notification .notification-icon {
            font-size: 24px;
            flex-shrink: 0;
        }

        .notification .notification-text {
            flex: 1;
            font-weight: 600;
            font-size: 14px;
            line-height: 1.4;
        }

        .notification .notification-close {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: #999;
            padding: 0;
            margin-left: 10px;
        }

        .notification .notification-close:hover {
            color: #666;
        }

        /* Enhanced Terms */
        .terms {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 25px;
            line-height: 1.6;
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .terms-link {
            color: #667eea;
            cursor: pointer;
            text-decoration: underline;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .terms-link:hover {
            color: #5a6fd8;
            text-decoration: none;
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #667eea;
            animation: confetti-fall 3s linear infinite;
            z-index: 10000;
        }

        /* Enhanced Confetti */
        .confetti {
            position: fixed;
            width: 12px;
            height: 12px;
            background: #667eea;
            animation: confetti-fall 4s linear infinite;
            z-index: 10000;
            border-radius: 50%;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(720deg);
            }
        }

        /* Modern Animations */
        @keyframes fadeIn {
            from { 
                opacity: 0; 
                backdrop-filter: blur(0px);
            }
            to { 
                opacity: 1; 
                backdrop-filter: blur(5px);
            }
        }

        @keyframes scaleIn {
            from { 
                opacity: 0; 
                transform: scale(0.8) translateY(-20px);
            }
            to { 
                opacity: 1; 
                transform: scale(1) translateY(0);
            }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        /* Dark Mode Styles */
        body.dark-mode {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        }

        body.dark-mode .subscription-container {
            background: rgba(44, 62, 80, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        body.dark-mode .subscription-container::before {
            background: linear-gradient(90deg, #3498db, #9b59b6, #e74c3c, #2ecc71, #3498db);
        }

        body.dark-mode .logo {
            background: linear-gradient(135deg, #3498db, #9b59b6);
            box-shadow: 
                0 15px 35px rgba(52, 152, 219, 0.4),
                0 5px 15px rgba(0, 0, 0, 0.3);
        }

        body.dark-mode h1 {
            color: #ecf0f1;
        }

        body.dark-mode .subtitle {
            color: rgba(236, 240, 241, 0.8);
        }

        body.dark-mode .plan-card {
            background: rgba(52, 73, 94, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        body.dark-mode .plan-card:hover {
            box-shadow: 
                0 30px 60px rgba(52, 152, 219, 0.15),
                0 10px 20px rgba(0, 0, 0, 0.3);
        }

        body.dark-mode .plan-name {
            background: linear-gradient(135deg, #3498db, #9b59b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        body.dark-mode .plan-price {
            color: #3498db;
        }

        body.dark-mode .plan-period {
            color: #bdc3c7;
        }

        body.dark-mode .feature-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        body.dark-mode .feature-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        body.dark-mode .feature-icon {
            background: linear-gradient(135deg, #3498db, #9b59b6);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        }

        body.dark-mode .feature-text {
            color: #ecf0f1;
        }

        body.dark-mode .feature-text strong {
            color: #3498db;
        }

        body.dark-mode .cta-button {
            background: linear-gradient(135deg, #3498db 0%, #9b59b6 100%);
            box-shadow: 0 12px 35px rgba(52, 152, 219, 0.4);
        }

        body.dark-mode .cta-button:hover {
            box-shadow: 0 20px 50px rgba(52, 152, 219, 0.6);
        }

        body.dark-mode .cancel-button {
            color: #e74c3c;
            border-color: #e74c3c;
        }

        body.dark-mode .cancel-button:hover {
            background: #e74c3c;
            box-shadow: 0 10px 25px rgba(231, 76, 60, 0.3);
        }

        body.dark-mode .back-button {
            background: rgba(255, 255, 255, 0.05);
            color: #ecf0f1;
            border-color: rgba(255, 255, 255, 0.2);
        }

        body.dark-mode .back-button:hover {
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 10px 25px rgba(255, 255, 255, 0.1);
        }

        body.dark-mode .terms {
            color: rgba(236, 240, 241, 0.6);
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        body.dark-mode .terms-link {
            color: #74b9ff;
        }

        body.dark-mode .terms-link:hover {
            color: #0984e3;
        }

        body.dark-mode .subscription-status {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            box-shadow: 0 8px 25px rgba(39, 174, 96, 0.3);
        }

        body.dark-mode .subscription-status::before {
            background: linear-gradient(180deg, #2ecc71, #27ae60);
        }

        body.dark-mode .notification {
            background: rgba(44, 62, 80, 0.95);
            color: #ecf0f1;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Dark Mode Toggle Button */
        .dark-mode-toggle {
            position: fixed;
            top: 30px;
            right: 30px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            padding: 10px 15px;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s ease;
            z-index: 1000;
            color: white;
        }

        .dark-mode-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        body.dark-mode .dark-mode-toggle {
            background: rgba(255, 255, 255, 0.1);
            color: #ecf0f1;
        }

        /* Language Toggle Button */
        .language-toggle {
            position: fixed;
            top: 30px;
            right: 100px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            padding: 10px 15px;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s ease;
            z-index: 1000;
            color: white;
        }

        .language-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        body.dark-mode .language-toggle {
            background: rgba(255, 255, 255, 0.1);
            color: #ecf0f1;
        }

        /* Enhanced Stripe Payment Modal Styles */
        .payment-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(15px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10002;
            animation: modalFadeIn 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            opacity: 0;
            animation-fill-mode: forwards;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                backdrop-filter: blur(0px);
            }
            to {
                opacity: 1;
                backdrop-filter: blur(15px);
            }
        }

        .payment-container {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.95));
            backdrop-filter: blur(25px);
            border-radius: 30px;
            padding: 45px;
            max-width: 520px;
            width: 92%;
            box-shadow: 
                0 30px 60px rgba(0, 0, 0, 0.25),
                0 20px 40px rgba(102, 126, 234, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.3);
            animation: modalSlideUp 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
            transform: translateY(50px) scale(0.9);
            animation-fill-mode: forwards;
        }

        @keyframes modalSlideUp {
            from {
                opacity: 0;
                transform: translateY(50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .payment-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2, #ff6b6b, #4ecdc4, #667eea);
            background-size: 300% 100%;
            animation: gradientFlow 4s ease infinite;
        }

        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .payment-header {
            text-align: center;
            margin-bottom: 35px;
            position: relative;
        }

        .payment-header::before {
            content: '💳';
            font-size: 48px;
            display: block;
            margin-bottom: 15px;
            animation: iconBounce 2s ease-in-out infinite;
        }

        @keyframes iconBounce {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-8px) rotate(-5deg); }
            75% { transform: translateY(-4px) rotate(5deg); }
        }

        .payment-title {
            font-size: 28px;
            font-weight: 900;
            background: linear-gradient(135deg, #667eea, #764ba2, #ff6b6b);
            background-size: 200% 100%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
            animation: titleGradient 3s ease infinite;
            letter-spacing: -0.5px;
        }

        @keyframes titleGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .payment-subtitle {
            color: #7f8c8d;
            font-size: 15px;
            line-height: 1.6;
            font-weight: 500;
        }

        .payment-element {
            margin: 30px 0;
            padding: 25px;
            border: 2px solid transparent;
            border-radius: 18px;
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.9), rgba(248, 250, 252, 0.8));
            box-shadow: 
                0 8px 20px rgba(0, 0, 0, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative;
            overflow: hidden;
        }

        .payment-element::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, #667eea, transparent);
            transform: translateX(-100%);
            transition: transform 0.5s ease;
        }

        .payment-element:focus-within {
            border-color: #667eea;
            box-shadow: 
                0 12px 30px rgba(102, 126, 234, 0.2),
                0 0 0 4px rgba(102, 126, 234, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            transform: translateY(-2px);
        }

        .payment-element:focus-within::before {
            transform: translateX(0);
        }

        .payment-buttons {
            display: flex;
            gap: 18px;
            margin-top: 30px;
        }

        .payment-submit {
            flex: 2;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 18px 30px;
            border-radius: 16px;
            font-size: 17px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 12px 25px rgba(102, 126, 234, 0.3),
                0 4px 10px rgba(0, 0, 0, 0.1);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .payment-submit::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.25), transparent);
            transition: left 0.6s ease;
        }

        .payment-submit:hover {
            transform: translateY(-3px);
            box-shadow: 
                0 20px 40px rgba(102, 126, 234, 0.4),
                0 8px 15px rgba(0, 0, 0, 0.15);
        }

        .payment-submit:hover::before {
            left: 100%;
        }

        .payment-submit:active {
            transform: translateY(-1px);
            transition: transform 0.1s ease;
        }

        .payment-submit:disabled {
            background: linear-gradient(135deg, #bdc3c7, #95a5a6);
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .payment-cancel {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            color: #e74c3c;
            border: 2px solid #e74c3c;
            padding: 18px 30px;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .payment-cancel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #e74c3c;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            z-index: -1;
        }

        .payment-cancel:hover {
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 12px 25px rgba(231, 76, 60, 0.3);
        }

        .payment-cancel:hover::before {
            transform: translateY(0);
        }

        .secure-badge {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 25px;
            padding: 16px 20px;
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.15), rgba(39, 174, 96, 0.1));
            border-radius: 15px;
            color: #27ae60;
            font-size: 15px;
            font-weight: 700;
            border: 1px solid rgba(46, 204, 113, 0.2);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .secure-badge::before {
            content: '🔒';
            font-size: 20px;
            animation: secureFloat 3s ease-in-out infinite;
        }

        .secure-badge::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(46, 204, 113, 0.1), transparent);
            animation: secureShimmer 2s ease infinite;
        }

        @keyframes secureFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }

        @keyframes secureShimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .payment-loading {
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .payment-spinner {
            width: 18px;
            height: 18px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Enhanced Dark Mode Styles for Payment Modal */
        body.dark-mode .payment-container {
            background: linear-gradient(145deg, rgba(44, 62, 80, 0.98), rgba(52, 73, 94, 0.95));
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 
                0 30px 60px rgba(0, 0, 0, 0.4),
                0 20px 40px rgba(52, 152, 219, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        body.dark-mode .payment-container::before {
            background: linear-gradient(90deg, #3498db, #9b59b6, #e74c3c, #2ecc71, #3498db);
        }

        body.dark-mode .payment-title {
            background: linear-gradient(135deg, #3498db, #9b59b6, #74b9ff);
            background-size: 200% 100%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        body.dark-mode .payment-subtitle {
            color: #bdc3c7;
        }

        body.dark-mode .payment-element {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.08), rgba(236, 240, 241, 0.05));
            border-color: rgba(255, 255, 255, 0.15);
        }

        body.dark-mode .payment-element:focus-within {
            border-color: #3498db;
            box-shadow: 
                0 12px 30px rgba(52, 152, 219, 0.2),
                0 0 0 4px rgba(52, 152, 219, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        body.dark-mode .payment-submit {
            background: linear-gradient(135deg, #3498db, #9b59b6);
            box-shadow: 
                0 12px 25px rgba(52, 152, 219, 0.3),
                0 4px 10px rgba(0, 0, 0, 0.2);
        }

        body.dark-mode .payment-submit:hover {
            box-shadow: 
                0 20px 40px rgba(52, 152, 219, 0.4),
                0 8px 15px rgba(0, 0, 0, 0.25);
        }

        body.dark-mode .payment-cancel {
            color: #ecf0f1;
            border-color: rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.05);
        }

        body.dark-mode .payment-cancel:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #ecf0f1;
        }

        body.dark-mode .secure-badge {
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.2), rgba(39, 174, 96, 0.15));
            color: #2ecc71;
            border-color: rgba(46, 204, 113, 0.3);
        }

        /* Enhanced Dark Mode Styles for General Modals */
        body.dark-mode .modal-content {
            background: linear-gradient(145deg, rgba(44, 62, 80, 0.98), rgba(52, 73, 94, 0.95));
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: #ecf0f1;
            box-shadow: 
                0 30px 60px rgba(0, 0, 0, 0.4),
                0 20px 40px rgba(52, 152, 219, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        body.dark-mode .modal-content::before {
            background: linear-gradient(90deg, #3498db, #9b59b6, #e74c3c, #2ecc71, #3498db);
        }

        body.dark-mode .modal-content h3 {
            background: linear-gradient(135deg, #74b9ff, #a29bfe);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        body.dark-mode .modal-content h3::after {
            background: linear-gradient(135deg, #74b9ff, #a29bfe);
        }

        body.dark-mode .modal-content p {
            color: #bdc3c7;
        }

        body.dark-mode .modal-btn-primary {
            background: linear-gradient(135deg, #3498db, #9b59b6);
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.3);
        }

        body.dark-mode .modal-btn-primary:hover {
            box-shadow: 0 12px 30px rgba(52, 152, 219, 0.4);
        }

        body.dark-mode .modal-btn-secondary {
            background: rgba(255, 255, 255, 0.05);
            color: #ecf0f1;
            border-color: rgba(255, 255, 255, 0.2);
        }

        body.dark-mode .modal-btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Enhanced Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(12px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10001;
            animation: overlayFadeIn 0.4s ease;
            opacity: 0;
            animation-fill-mode: forwards;
        }

        @keyframes overlayFadeIn {
            from {
                opacity: 0;
                backdrop-filter: blur(0px);
            }
            to {
                opacity: 1;
                backdrop-filter: blur(12px);
            }
        }

        .modal-content {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.95));
            backdrop-filter: blur(25px);
            padding: 40px;
            border-radius: 25px;
            max-width: 650px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 
                0 30px 60px rgba(0, 0, 0, 0.2),
                0 20px 40px rgba(102, 126, 234, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.3);
            margin: 20px;
            position: relative;
            transform: translateY(50px) scale(0.9);
            animation: modalContentSlideIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
            overflow: hidden;
        }

        @keyframes modalContentSlideIn {
            from {
                opacity: 0;
                transform: translateY(50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2, #ff6b6b, #4ecdc4, #667eea);
            background-size: 300% 100%;
            animation: modalGradientFlow 4s ease infinite;
        }

        @keyframes modalGradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .modal-content h3 {
            color: #667eea;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 20px;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
        }

        .modal-content h3::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 50px;
            height: 3px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 2px;
        }

        .modal-content p {
            line-height: 1.7;
            margin-bottom: 18px;
            color: #444;
            font-size: 15px;
        }

        /* Enhanced Modal Buttons */
        .modal-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            justify-content: flex-end;
        }

        .modal-btn {
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            border: none;
            position: relative;
            overflow: hidden;
        }

        .modal-btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .modal-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(102, 126, 234, 0.4);
        }

        .modal-btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #7f8c8d;
            border: 2px solid rgba(127, 140, 141, 0.3);
            backdrop-filter: blur(10px);
        }

        .modal-btn-secondary:hover {
            background: rgba(127, 140, 141, 0.1);
            transform: translateY(-1px);
        }

        /* Dark mode modal styles */
        body.dark-mode .modal-content {
            background: linear-gradient(145deg, rgba(44, 62, 80, 0.98), rgba(52, 73, 94, 0.95));
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: #ecf0f1;
            box-shadow: 
                0 30px 60px rgba(0, 0, 0, 0.4),
                0 20px 40px rgba(52, 152, 219, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        body.dark-mode .modal-content::before {
            background: linear-gradient(90deg, #3498db, #9b59b6, #e74c3c, #2ecc71, #3498db);
        }

        body.dark-mode .modal-content h3 {
            background: linear-gradient(135deg, #74b9ff, #a29bfe);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        body.dark-mode .modal-content h3::after {
            background: linear-gradient(135deg, #74b9ff, #a29bfe);
        }

        body.dark-mode .modal-content p {
            color: #bdc3c7;
        }

        body.dark-mode .modal-btn-primary {
            background: linear-gradient(135deg, #3498db, #9b59b6);
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.3);
        }

        body.dark-mode .modal-btn-primary:hover {
            box-shadow: 0 12px 30px rgba(52, 152, 219, 0.4);
        }

        body.dark-mode .modal-btn-secondary {
            background: rgba(255, 255, 255, 0.05);
            color: #ecf0f1;
            border-color: rgba(255, 255, 255, 0.2);
        }

        body.dark-mode .modal-btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Enhanced Responsive Design - Βελτιωμένο για κινητά */
        @media (max-width: 768px) {
            body {
                padding: 15px 10px;
                font-size: 14px;
                min-height: 100vh;
            }

            .subscription-container {
                padding: 25px 18px;
                margin: 10px auto;
                border-radius: 18px;
                max-width: none;
                width: calc(100% - 20px);
                box-sizing: border-box;
                overflow: visible;
            }

            .logo {
                width: 65px;
                height: 65px;
                font-size: 26px;
                margin-bottom: 18px;
            }

            h1 {
                font-size: 22px;
                margin-bottom: 12px;
                line-height: 1.3;
            }

            .subtitle {
                font-size: 13px;
                margin-bottom: 20px;
                line-height: 1.4;
                padding: 0 5px;
            }

            .plan-card {
                padding: 20px 15px;
                margin: 15px 0;
                border-radius: 15px;
            }

            .plan-name {
                font-size: 17px;
                margin-bottom: 8px;
            }

            .plan-price {
                font-size: 32px;
                margin: 8px 0;
            }

            .plan-period {
                font-size: 12px;
                margin-bottom: 12px;
            }

            .free-trial {
                font-size: 12px;
                padding: 8px 12px;
                margin: 12px 0 18px;
                border-radius: 20px;
            }

            .features-list {
                margin: 18px 0;
            }

            .feature-item {
                padding: 10px 8px;
                margin-bottom: 8px;
                border-radius: 10px;
                flex-direction: column;
                text-align: center;
                gap: 8px;
            }

            .feature-icon {
                font-size: 18px;
                width: 32px;
                height: 32px;
                min-width: 32px;
                margin: 0 auto;
            }

            .feature-text {
                font-size: 12px;
                line-height: 1.4;
                text-align: center;
            }

            .cta-button, .cancel-button {
                padding: 16px 20px;
                font-size: 14px;
                margin: 10px 0;
                width: 100%;
                box-sizing: border-box;
                border-radius: 12px;
                min-height: 50px;
            }

            .back-button {
                padding: 12px 20px;
                font-size: 13px;
                margin-top: 15px;
                width: 100%;
                box-sizing: border-box;
                border-radius: 10px;
            }

            .terms {
                font-size: 10px;
                line-height: 1.4;
                padding: 12px;
                margin-top: 15px;
                border-radius: 10px;
            }

            .notification {
                bottom: 15px;
                left: 10px;
                right: 10px;
                width: auto;
                border-radius: 12px;
                padding: 12px;
                max-width: none;
                min-width: auto;
            }

            .notification-content {
                padding: 8px;
            }

            .notification-text {
                font-size: 13px;
                margin: 0 10px;
            }

            .dark-mode-toggle {
                top: 15px;
                right: 15px;
                padding: 8px;
                font-size: 16px;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .language-toggle {
                top: 15px;
                right: 65px;
                padding: 8px;
                font-size: 16px;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .payment-modal {
                padding: 10px;
                align-items: flex-start;
                padding-top: 20px;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
            }

            .payment-container {
                margin: 10px auto;
                padding: 30px 20px;
                max-width: none;
                width: calc(100% - 20px);
                border-radius: 20px;
                box-sizing: border-box;
                transform: none;
                animation: mobileModalSlideUp 0.4s ease forwards;
            }

            @keyframes mobileModalSlideUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .payment-header {
                margin-bottom: 25px;
            }

            .payment-header::before {
                font-size: 36px;
                margin-bottom: 12px;
            }

            .payment-title {
                font-size: 22px;
                margin-bottom: 10px;
            }

            .payment-subtitle {
                font-size: 13px;
                line-height: 1.5;
            }

            .payment-element {
                margin: 20px 0;
                padding: 20px 16px;
                border-radius: 15px;
            }

            .payment-buttons {
                flex-direction: column;
                gap: 12px;
                margin-top: 25px;
            }

            .payment-submit, .payment-cancel {
                padding: 16px 20px;
                font-size: 15px;
                width: 100%;
                box-sizing: border-box;
                border-radius: 14px;
                min-height: 50px;
            }

            .secure-badge {
                padding: 12px 16px;
                font-size: 13px;
                margin-top: 20px;
                border-radius: 12px;
            }

            /* Mobile specific button styles */
            .demo-payment-btn {
                width: 100% !important;
                box-sizing: border-box !important;
                padding: 14px 20px !important;
                font-size: 14px !important;
                border-radius: 10px !important;
                margin-top: 15px !important;
                min-height: 48px !important;
            }

            /* Enhanced Modal responsive styles */
            .modal-content {
                margin: 15px !important;
                padding: 30px 25px !important;
                max-height: 90vh !important;
                max-width: calc(100vw - 30px) !important;
                border-radius: 20px !important;
                transform: none !important;
                animation: mobileModalContentSlideUp 0.4s ease forwards !important;
            }

            @keyframes mobileModalContentSlideUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .modal-content h3 {
                font-size: 18px !important;
                margin-top: 20px !important;
                margin-bottom: 12px !important;
            }

            .modal-content p {
                font-size: 14px !important;
                line-height: 1.6 !important;
                margin-bottom: 15px !important;
            }

            .modal-buttons {
                flex-direction: column !important;
                gap: 12px !important;
                margin-top: 25px !important;
            }

            .modal-btn {
                width: 100% !important;
                padding: 14px 20px !important;
                font-size: 14px !important;
                border-radius: 12px !important;
                min-height: 48px !important;
            }
        }

        /* Extra small screens optimization */
        @media (max-width: 480px) {
            body {
                padding: 10px 5px;
                min-height: 100vh;
            }

            .subscription-container {
                padding: 20px 15px;
                margin: 5px auto;
                border-radius: 15px;
                width: calc(100% - 10px);
                overflow: visible;
            }

            h1 {
                font-size: 20px;
            }

            .plan-price {
                font-size: 28px;
            }

            .feature-text {
                font-size: 11px;
            }

            .payment-container {
                margin: 8px auto;
                padding: 25px 18px;
                border-radius: 18px;
                width: calc(100% - 16px);
            }

            .payment-header::before {
                font-size: 30px;
                margin-bottom: 10px;
            }

            .payment-title {
                font-size: 20px;
            }

            .payment-subtitle {
                font-size: 12px;
            }

            .payment-element {
                padding: 18px 14px;
                margin: 16px 0;
            }

            .payment-submit, .payment-cancel {
                padding: 14px 18px;
                font-size: 14px;
                min-height: 46px;
            }

            .secure-badge {
                padding: 10px 14px;
                font-size: 12px;
            }

            .modal-content {
                margin: 8px !important;
                padding: 25px 18px !important;
                border-radius: 18px !important;
            }

            .modal-content h3 {
                font-size: 16px !important;
            }

            .modal-content p {
                font-size: 13px !important;
            }

            .modal-btn {
                padding: 12px 18px !important;
                font-size: 13px !important;
                min-height: 44px !important;
            }

            .dark-mode-toggle, .language-toggle {
                top: 10px;
                width: 36px;
                height: 36px;
                font-size: 14px;
                padding: 6px;
            }

            .language-toggle {
                right: 55px;
            }

            /* Dialogs για πολύ μικρές οθόνες */
            .cancel-dialog, .success-dialog {
                margin: 10px !important;
                padding: 25px 20px !important;
                border-radius: 15px !important;
            }

            .cancel-dialog > div {
                flex-direction: column !important;
                gap: 12px !important;
            }

            .cancel-dialog button, .success-dialog button {
                width: 100% !important;
                font-size: 13px !important;
                padding: 12px 18px !important;
                min-height: 44px !important;
            }
        }

        /* Touch-friendly improvements για κινητά */
        button, .cta-button, .cancel-button, .back-button, 
        .payment-submit, .payment-cancel, .demo-payment-btn {
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            min-height: 44px;
            min-width: 44px;
        }

        /* Prevent text selection on buttons */
        button {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* Smooth scrolling για modals στα κινητά */
        .payment-modal {
            -webkit-overflow-scrolling: touch;
        }

        /* Improve tap targets for mobile */
        .dark-mode-toggle, .language-toggle, .notification-close {
            min-height: 44px;
            min-width: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        /* Mobile specific hover states (only apply on devices that support hover) */
        @media (hover: hover) {
            .cta-button:hover, .cancel-button:hover, .back-button:hover {
                transform: translateY(-2px);
            }
        }

        /* Ensure good contrast for mobile screens */
        @media (max-width: 768px) {
            .feature-text strong {
                color: #2c3e50;
                font-weight: 700;
            }
            
            body.dark-mode .feature-text strong {
                color: #ecf0f1;
            }
        }
    </style>
</head>
<body>
    <div class="subscription-container">
        <div class="logo">💼</div>
        <h1 data-translate="title">Premium Συνδρομή</h1>
        <p class="subtitle" data-translate="subtitle">Ξεκλειδώστε όλες τις δυνατότητες του Business Tracker</p>

        <!-- Subscription Status (shown when user has active subscription) -->
        <div class="subscription-status" id="subscriptionStatus">
            <strong data-translate="activeSubscription">🎉 Η συνδρομή σας είναι ενεργή!</strong><br>
            <span data-translate="expiresOn">Λήγει στις:</span> <span id="expiryDate"></span>
        </div>

        <!-- Main Plan -->
        <div class="plan-card">
            <div class="plan-name" data-translate="planName">Business Pro</div>
            <div class="plan-price">€12.99</div>
            <div class="plan-period" data-translate="planPeriod">ανά μήνα</div>
            <div class="free-trial" data-translate="freeTrial">🎁 3 Μέρες Δωρεάν Δοκιμή</div>

            <div class="features-list">
                <div class="feature-item">
                    <div class="feature-icon">🔍</div>
                    <div class="feature-text" data-translate="feature1"><strong>Έξυπνες Προτάσεις AI</strong> - Αυτόματη ανάλυση δεδομένων και προτάσεις βελτίωσης</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">📊</div>
                    <div class="feature-text" data-translate="feature2"><strong>Προηγμένα Αναλυτικά</strong> - Λεπτομερείς μετρικές απόδοσης και ανάλυση αγοράς</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">🔮</div>
                    <div class="feature-text" data-translate="feature3"><strong>AI Προβλέψεις</strong> - Προβλέψεις πωλήσεων έως 24 μήνες στο μέλλον</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">🎯</div>
                    <div class="feature-text" data-translate="feature4"><strong>Έξυπνοι Στόχοι</strong> - Αυτόματες προτάσεις στόχων βασισμένες στα δεδομένα</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">📈</div>
                    <div class="feature-text" data-translate="feature5"><strong>Εποχικότητα & Τάσεις</strong> - Ανάλυση εποχικών μοτίβων και δυναμικής αγοράς</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">⚡</div>
                    <div class="feature-text" data-translate="feature6"><strong>Μετρικές Αστάθειας</strong> - Παρακολούθηση κινδύνων και αξιολόγηση απόδοσης</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">🌊</div>
                    <div class="feature-text" data-translate="feature7"><strong>Ανάλυση Κινδύνου</strong> - Εκτίμηση επιπέδου κινδύνου και ρυθμού ανάκαμψης</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">💡</div>
                    <div class="feature-text" data-translate="feature8"><strong>Άπεριόριστη Πρόσβαση</strong> - Όλες οι δυνατότητες χωρίς περιορισμούς</div>
                </div>
            </div>

            <button class="cta-button" onclick="startSubscription()" data-translate="ctaButton">
                🚀 Ξεκινήστε τη Δωρεάν Δοκιμή
            </button>
            
            <button class="cancel-button" onclick="cancelSubscription()" id="cancelBtn" style="display: none;" data-translate="cancelButton">
                🗑️ Ακύρωση Συνδρομής
            </button>
        </div>

        <button class="back-button" onclick="goBack()" data-translate="backButton">
            ← Επιστροφή
        </button>

        <div class="terms" data-translate="terms">
            Με την εγγραφή συμφωνείτε με τους όρους χρήσης. Η δωρεάν δοκιμή διαρκεί 3 μέρες. 
            Μετά τη λήξη της δοκιμαστικής περιόδου θα χρεωθείτε €12.99/μήνα. 
            Μπορείτε να ακυρώσετε ανά πάσα στιγμή.
        </div>
    </div>

    <!-- Dark Mode Toggle -->
    <button class="dark-mode-toggle" id="darkModeToggle" onclick="toggleDarkMode()" title="Toggle Dark Mode">
        🌙
    </button>

    <!-- Language Toggle -->
    <button class="language-toggle" id="languageToggle" onclick="toggleLanguage()" title="Αλλαγή Γλώσσας">
        🇬🇷
    </button>

    <!-- Modern Notification Container -->
    <div class="notification" id="notification">
        <div class="notification-content">
            <div class="notification-icon" id="notificationIcon">🎉</div>
            <div class="notification-text" id="notificationText"></div>
            <button class="notification-close" onclick="hideNotification()">✕</button>
        </div>
    </div>

    <script>
        /*
        STRIPE INTEGRATION SETUP GUIDE:
        
        1. Get your Stripe keys from https://dashboard.stripe.com/apikeys
        2. Replace 'pk_test_51234567890abcdef...' with your actual publishable key
        3. Create a product and price in Stripe Dashboard:
           - Product: "Business Pro Subscription"
           - Price: €12.99/month with 3-day trial
           - Copy the price ID (starts with price_)
        4. Replace 'price_1234567890abcdef' with your actual price ID
        5. Set up webhooks in Stripe Dashboard to handle subscription events
        6. Create backend endpoints to:
           - Create PaymentIntent/Subscription
           - Handle webhook events
           - Manage customer subscriptions
        
        For production, you'll also need:
        - SSL certificate (HTTPS)
        - Backend server (Node.js, Python, PHP, etc.)
        - Database to store subscription status
        - Webhook endpoint to handle Stripe events
        */

        // Stripe Configuration
        // ✅ ΕΝΗΜΕΡΩΜΕΝΟ: Stripe Live Key ενεργοποιημένο για production
        const stripe = Stripe('pk_live_51NsMhxA1DFzFV9pRzlkLOHee4j7cyeDGQZJfolnsTVH0givjHlcWyP9PYYXrQM7WFnYV8tdkAgrkoyfLnaCMJysB003TUxSuBN');
        let elements;
        let paymentElement;

        // ==================== FOOTER MODAL FUNCTIONS ====================
        
        function showTermsModal() {
            const currentLanguage = localStorage.getItem('language') || 'el';
            const modal = createModal(
                translations[currentLanguage]['terms_title'] || 'Terms of Use',
                `
                <div style="text-align: left; line-height: 1.6; max-height: 400px; overflow-y: auto;">
                    <h3>${translations[currentLanguage]['terms_section1'] || 'Service Description'}</h3>
                    <p>${translations[currentLanguage]['terms_desc1'] || 'This service provides premium content access for a monthly subscription fee. The service includes a 3-day free trial period.'}</p>
                    
                    <h3>${translations[currentLanguage]['terms_section2'] || 'Payment Terms'}</h3>
                    <p>${translations[currentLanguage]['terms_desc2'] || 'Payment is processed monthly via Stripe. The subscription will automatically renew unless cancelled before the renewal date.'}</p>
                    
                    <h3>${translations[currentLanguage]['terms_section3'] || 'Cancellation Policy'}</h3>
                    <p>${translations[currentLanguage]['terms_desc3'] || 'You may cancel your subscription at any time. No refunds will be provided for partial month usage.'}</p>
                    
                    <h3>${translations[currentLanguage]['terms_section4'] || 'User Responsibilities'}</h3>
                    <p>${translations[currentLanguage]['terms_desc4'] || 'Users are responsible for maintaining account security and following community guidelines.'}</p>
                </div>
                `,
                'I Agree',
                'Close'
            );
        }

        function showPrivacyModal() {
            const currentLanguage = localStorage.getItem('language') || 'el';
            const modal = createModal(
                translations[currentLanguage]['privacy_title'] || 'Privacy Policy',
                `
                <div style="text-align: left; line-height: 1.6; max-height: 400px; overflow-y: auto;">
                    <h3>${translations[currentLanguage]['privacy_section1'] || 'Data Collection'}</h3>
                    <p>${translations[currentLanguage]['privacy_desc1'] || 'We collect only necessary information for service provision including email, payment information, and usage analytics.'}</p>
                    
                    <h3>${translations[currentLanguage]['privacy_section2'] || 'Data Usage'}</h3>
                    <p>${translations[currentLanguage]['privacy_desc2'] || 'Your data is used solely for service delivery, customer support, and improving our offerings. We do not sell personal information.'}</p>
                    
                    <h3>${translations[currentLanguage]['privacy_section3'] || 'Data Security'}</h3>
                    <p>${translations[currentLanguage]['privacy_desc3'] || 'All data is encrypted and stored securely. Payment processing is handled by Stripe with industry-standard security measures.'}</p>
                    
                    <h3>${translations[currentLanguage]['privacy_section4'] || 'Your Rights'}</h3>
                    <p>${translations[currentLanguage]['privacy_desc4'] || 'You have the right to access, modify, or delete your personal data at any time by contacting our support team.'}</p>
                </div>
                `,
                'Understood',
                'Close'
            );
        }

        function showRefundModal() {
            const currentLanguage = localStorage.getItem('language') || 'el';
            const modal = createModal(
                translations[currentLanguage]['refund_title'] || 'Refund Policy',
                `
                <div style="text-align: left; line-height: 1.6; max-height: 400px; overflow-y: auto;">
                    <h3>${translations[currentLanguage]['refund_section1'] || 'General Policy'}</h3>
                    <p>${translations[currentLanguage]['refund_desc1'] || 'Due to the digital nature of our service, refunds are generally not provided after the free trial period ends.'}</p>
                    
                    <h3>${translations[currentLanguage]['refund_section2'] || 'Trial Period'}</h3>
                    <p>${translations[currentLanguage]['refund_desc2'] || 'You can cancel during the 3-day free trial without any charges. Cancel before the trial ends to avoid billing.'}</p>
                    
                    <h3>${translations[currentLanguage]['refund_section3'] || 'Special Circumstances'}</h3>
                    <p>${translations[currentLanguage]['refund_desc3'] || 'Refunds may be considered in exceptional circumstances such as technical issues preventing service access.'}</p>
                    
                    <h3>${translations[currentLanguage]['refund_section4'] || 'Contact Support'}</h3>
                    <p>${translations[currentLanguage]['refund_desc4'] || 'For refund requests, please contact our support team with your subscription details and reason for the request.'}</p>
                </div>
                `,
                'Understood',
                'Close'
            );
        }

        function showContactModal() {
            const currentLanguage = localStorage.getItem('language') || 'el';
            const modal = createModal(
                translations[currentLanguage]['contact_title'] || 'Contact Support',
                `
                <div style="text-align: left; line-height: 1.6;">
                    <div style="background: rgba(52, 152, 219, 0.1); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                        <h3 style="margin-top: 0;">${translations[currentLanguage]['contact_email'] || 'Email Support'}</h3>
                        <p style="margin: 5px 0;"><strong>Email:</strong> support@example.com</p>
                        <p style="margin: 5px 0; font-size: 12px; color: rgba(255,255,255,0.7);">${translations[currentLanguage]['contact_response'] || 'Response within 24 hours'}</p>
                    </div>
                    
                    <div style="background: rgba(46, 204, 113, 0.1); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                        <h3 style="margin-top: 0;">${translations[currentLanguage]['contact_live'] || 'Live Chat'}</h3>
                        <p style="margin: 5px 0;">${translations[currentLanguage]['contact_available'] || 'Available Monday-Friday 9AM-6PM EST'}</p>
                        <button onclick="startLiveChat()" style="background: #2ecc71; color: white; border: none; padding: 8px 16px; border-radius: 5px; margin-top: 8px;">${translations[currentLanguage]['contact_start_chat'] || 'Start Chat'}</button>
                    </div>
                    
                    <div style="background: rgba(155, 89, 182, 0.1); padding: 15px; border-radius: 10px;">
                        <h3 style="margin-top: 0;">${translations[currentLanguage]['contact_phone'] || 'Phone Support'}</h3>
                        <p style="margin: 5px 0;"><strong>Phone:</strong> +1 (555) 123-4567</p>
                        <p style="margin: 5px 0; font-size: 12px; color: rgba(255,255,255,0.7);">${translations[currentLanguage]['contact_business'] || 'Business hours only'}</p>
                    </div>
                </div>
                `,
                'Got It',
                'Close'
            );
        }

        function showHelpModal() {
            const currentLanguage = localStorage.getItem('language') || 'el';
            const modal = createModal(
                translations[currentLanguage]['help_title'] || 'Help Center',
                `
                <div style="text-align: left; line-height: 1.6;">
                    <div style="display: grid; gap: 12px;">
                        <div style="background: rgba(52, 152, 219, 0.1); padding: 12px; border-radius: 8px; cursor: pointer;" onclick="showFaqSection('billing')">
                            <h4 style="margin: 0; color: #3498db;">${translations[currentLanguage]['help_billing'] || '💳 Billing & Payments'}</h4>
                            <p style="margin: 5px 0 0; font-size: 12px; color: rgba(255,255,255,0.7);">${translations[currentLanguage]['help_billing_desc'] || 'Payment issues, billing questions, subscription management'}</p>
                        </div>
                        
                        <div style="background: rgba(46, 204, 113, 0.1); padding: 12px; border-radius: 8px; cursor: pointer;" onclick="showFaqSection('account')">
                            <h4 style="margin: 0; color: #2ecc71;">${translations[currentLanguage]['help_account'] || '👤 Account Management'}</h4>
                            <p style="margin: 5px 0 0; font-size: 12px; color: rgba(255,255,255,0.7);">${translations[currentLanguage]['help_account_desc'] || 'Login issues, password reset, account settings'}</p>
                        </div>
                        
                        <div style="background: rgba(230, 126, 34, 0.1); padding: 12px; border-radius: 8px; cursor: pointer;" onclick="showFaqSection('technical')">
                            <h4 style="margin: 0; color: #e67e22;">${translations[currentLanguage]['help_technical'] || '⚙️ Technical Support'}</h4>
                            <p style="margin: 5px 0 0; font-size: 12px; color: rgba(255,255,255,0.7);">${translations[currentLanguage]['help_technical_desc'] || 'App issues, browser compatibility, performance problems'}</p>
                        </div>
                        
                        <div style="background: rgba(155, 89, 182, 0.1); padding: 12px; border-radius: 8px; cursor: pointer;" onclick="showFaqSection('general')">
                            <h4 style="margin: 0; color: #9b59b6;">${translations[currentLanguage]['help_general'] || '❓ General Questions'}</h4>
                            <p style="margin: 5px 0 0; font-size: 12px; color: rgba(255,255,255,0.7);">${translations[currentLanguage]['help_general_desc'] || 'How to use features, getting started, general inquiries'}</p>
                        </div>
                    </div>
                </div>
                `,
                'Contact Support',
                'Close'
            );
        }

        function showFaqModal() {
            const currentLanguage = localStorage.getItem('language') || 'el';
            const modal = createModal(
                translations[currentLanguage]['faq_title'] || 'Frequently Asked Questions',
                `
                <div style="text-align: left; line-height: 1.6; max-height: 400px; overflow-y: auto;">
                    <div style="margin-bottom: 15px;">
                        <h4 style="color: #3498db; margin: 0 0 5px 0;">${translations[currentLanguage]['faq_q1'] || 'How do I cancel my subscription?'}</h4>
                        <p style="margin: 0; font-size: 13px; color: rgba(255,255,255,0.8);">${translations[currentLanguage]['faq_a1'] || 'You can cancel anytime by clicking the "Cancel Subscription" button in your account settings or by contacting support.'}</p>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <h4 style="color: #2ecc71; margin: 0 0 5px 0;">${translations[currentLanguage]['faq_q2'] || 'When will I be charged?'}</h4>
                        <p style="margin: 0; font-size: 13px; color: rgba(255,255,255,0.8);">${translations[currentLanguage]['faq_a2'] || 'You will be charged after your 3-day free trial ends, then monthly on the same date each month.'}</p>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <h4 style="color: #e67e22; margin: 0 0 5px 0;">${translations[currentLanguage]['faq_q3'] || 'Can I change my payment method?'}</h4>
                        <p style="margin: 0; font-size: 13px; color: rgba(255,255,255,0.8);">${translations[currentLanguage]['faq_a3'] || 'Yes, you can update your payment method in your account settings or contact support for assistance.'}</p>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <h4 style="color: #9b59b6; margin: 0 0 5px 0;">${translations[currentLanguage]['faq_q4'] || 'What happens if my payment fails?'}</h4>
                        <p style="margin: 0; font-size: 13px; color: rgba(255,255,255,0.8);">${translations[currentLanguage]['faq_a4'] || 'We will retry payment and send you a notification. Your access will be maintained for 48 hours to update payment information.'}</p>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <h4 style="color: #e74c3c; margin: 0 0 5px 0;">${translations[currentLanguage]['faq_q5'] || 'Is my payment information secure?'}</h4>
                        <p style="margin: 0; font-size: 13px; color: rgba(255,255,255,0.8);">${translations[currentLanguage]['faq_a5'] || 'Yes, all payments are processed securely through Stripe with industry-standard encryption and security measures.'}</p>
                    </div>
                </div>
                `,
                'Contact Support',
                'Close'
            );
        }

        // Helper functions για τα footer modals
        function startLiveChat() {
            const currentLanguage = localStorage.getItem('language') || 'el';
            showNotification(
                translations[currentLanguage]['chat_starting'] || 'Starting live chat...',
                'info'
            );
            setTimeout(() => {
                showNotification(
                    translations[currentLanguage]['chat_demo'] || 'Live chat demo - Contact support for real assistance',
                    'warning'
                );
            }, 2000);
        }

        function showFaqSection(section) {
            const currentLanguage = localStorage.getItem('language') || 'el';
            showNotification(
                translations[currentLanguage]['faq_loading'] || `Loading ${section} FAQ section...`,
                'info'
            );
        }

        // Core Modal Creation Function
        function createModal(title, content, primaryButtonText = 'OK', secondaryButtonText = 'Cancel') {
            // Create modal overlay
            const modalOverlay = document.createElement('div');
            modalOverlay.className = 'modal-overlay';
            modalOverlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.7);
                backdrop-filter: blur(5px);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10001;
                animation: fadeIn 0.3s ease;
            `;

            // Create modal content
            const modalContent = document.createElement('div');
            modalContent.className = 'modal-content';
            modalContent.style.cssText = `
                background: rgba(255, 255, 255, 0.95);
                backdrop-filter: blur(20px);
                padding: 30px;
                border-radius: 20px;
                max-width: 600px;
                max-height: 80vh;
                overflow-y: auto;
                box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
                border: 1px solid rgba(255, 255, 255, 0.2);
                animation: scaleIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
                margin: 20px;
            `;

            // Apply dark mode if active
            if (document.body.classList.contains('dark-mode')) {
                modalContent.style.background = 'rgba(52, 73, 94, 0.95)';
                modalContent.style.border = '1px solid rgba(255, 255, 255, 0.1)';
                modalContent.style.color = '#ecf0f1';
            }

            modalContent.innerHTML = `
                <div class="modal-header" style="margin-bottom: 20px;">
                    <h2 style="margin: 0; font-size: 24px; color: ${document.body.classList.contains('dark-mode') ? '#74b9ff' : '#667eea'};">${title}</h2>
                </div>
                <div class="modal-body" style="margin-bottom: 25px;">
                    ${content}
                </div>
                <div class="modal-footer" style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button onclick="closeModal()" style="
                        background: transparent;
                        color: ${document.body.classList.contains('dark-mode') ? '#bdc3c7' : '#6c757d'};
                        border: 1px solid ${document.body.classList.contains('dark-mode') ? 'rgba(255,255,255,0.2)' : 'rgba(0,0,0,0.2)'};
                        padding: 10px 20px;
                        border-radius: 8px;
                        cursor: pointer;
                        transition: all 0.2s ease;
                    ">${secondaryButtonText}</button>
                    <button onclick="closeModal()" style="
                        background: linear-gradient(135deg, #667eea, #764ba2);
                        color: white;
                        border: none;
                        padding: 10px 20px;
                        border-radius: 8px;
                        cursor: pointer;
                        transition: all 0.2s ease;
                    ">${primaryButtonText}</button>
                </div>
            `;

            modalOverlay.appendChild(modalContent);
            document.body.appendChild(modalOverlay);

            // Close modal when clicking outside
            modalOverlay.addEventListener('click', function(e) {
                if (e.target === modalOverlay) {
                    closeModal();
                }
            });

            // Global close function
            window.closeModal = function() {
                modalOverlay.remove();
                delete window.closeModal;
            };

            return modalOverlay;
        }

        // ==================== END FOOTER MODAL FUNCTIONS ====================

        // Stripe Payment Configuration
        const STRIPE_CONFIG = {
            publishableKey: 'pk_live_51NsMhxA1DFzFV9pRzlkLOHee4j7cyeDGQZJfolnsTVH0givjHlcWyP9PYYXrQM7WFnYV8tdkAgrkoyfLnaCMJysB003TUxSuBN',
            priceId: 'price_1RmsJyA1DFzFV9pRZIX920UB', // ✅ ΕΝΗΜΕΡΩΜΕΝΟ ΜΕ ΤΟ ΣΩΣΤΟ PRICE ID!
            currency: 'eur',
            amount: 1299, // €12.99 in cents
            trialDays: 3,
            isProduction: true // Live mode ενεργοποιημένο
        };

        // Backend API Configuration - ΠΡΟΣΘΗΚΗ
        const BACKEND_CONFIG = {
            baseUrl: 'http://localhost:3002/api',
            endpoints: {
                createPaymentIntent: '/payments/create-payment-intent',
                getSubscription: '/payments/subscription',
                cancelSubscription: '/payments/subscription/{id}/cancel'
            }
        };

        // Language System
        const translations = {
            el: {
                title: "Premium Συνδρομή",
                subtitle: "Ξεκλειδώστε όλες τις δυνατότητες του Business Tracker",
                activeSubscription: "🎉 Η συνδρομή σας είναι ενεργή!",
                expiresOn: "Λήγει στις:",
                planName: "Business Pro",
                planPeriod: "ανά μήνα",
                freeTrial: "🎁 3 Μέρες Δωρεάν Δοκιμή",
                feature1: "<strong>Έξυπνες Προτάσεις AI</strong> - Αυτόματη ανάλυση δεδομένων και προτάσεις βελτίωσης",
                feature2: "<strong>Προηγμένα Αναλυτικά</strong> - Λεπτομερείς μετρικές απόδοσης και ανάλυση αγοράς",
                feature3: "<strong>AI Προβλέψεις</strong> - Προβλέψεις πωλήσεων έως 24 μήνες στο μέλλον",
                feature4: "<strong>Έξυπνοι Στόχοι</strong> - Αυτόματες προτάσεις στόχων βασισμένες στα δεδομένα",
                feature5: "<strong>Εποχικότητα & Τάσεις</strong> - Ανάλυση εποχικών μοτίβων και δυναμικής αγοράς",
                feature6: "<strong>Μετρικές Αστάθειας</strong> - Παρακολούθηση κινδύνων και αξιολόγηση απόδοσης",
                feature7: "<strong>Ανάλυση Κινδύνου</strong> - Εκτίμηση επιπέδου κινδύνου και ρυθμού ανάκαμψης",
                feature8: "<strong>Άπεριόριστη Πρόσβαση</strong> - Όλες οι δυνατότητες χωρίς περιορισμούς",
                ctaButton: "🚀 Ξεκινήστε τη Δωρεάν Δοκιμή",
                cancelButton: "🗑️ Ακύρωση Συνδρομής",
                backButton: "← Επιστροφή",
                terms: "Με την εγγραφή συμφωνείτε με τους <span class='terms-link' onclick='showTermsModal()'>όρους χρήσης</span>. Η δωρεάν δοκιμή διαρκεί 3 μέρες. Μετά τη λήξη της δοκιμαστικής περιόδου θα χρεωθείτε €12.99/μήνα. Μπορείτε να ακυρώσετε ανά πάσα στιγμή.",
                activeSubscriptionStatus: "✅ Η Συνδρομή σας είναι Ενεργή",
                confirmTrialTitle: "Ξεκινήστε τη Δωρεάν Δοκιμή",
                confirmTrialText: "Θέλετε να ξεκινήσετε τη δωρεάν δοκιμή <strong>3 ημερών</strong>;<br>Θα έχετε πλήρη πρόσβαση σε όλες τις premium δυνατότητες!",
                confirmTrialYes: "🚀 Ναι, Ξεκινάμε!",
                confirmTrialNo: "Όχι τώρα",
                cancelTitle: "Ακύρωση Συνδρομής",
                cancelText: "Είστε σίγουρος ότι θέλετε να <strong>ακυρώσετε</strong> τη συνδρομή σας;<br>Θα χάσετε την πρόσβαση σε όλες τις premium δυνατότητες.",
                cancelYes: "💔 Ναι, Ακύρωση",
                cancelNo: "💼 Κράτησε την Συνδρομή",
                successTitle: "Καλώς ήρθατε στο Premium!",
                successText: "🚀 Η δωρεάν δοκιμή σας ξεκίνησε!<br>✨ Έχετε πλήρη πρόσβαση για <strong>3 μέρες</strong>.<br>🔓 Όλες οι premium δυνατότητες είναι πλέον διαθέσιμες!",
                successButton: "🎯 Πάμε!",
                notificationWelcome: "🎉 Καλώς ήρθατε στο Premium! Η δωρεάν δοκιμή σας ξεκίνησε!",
                notificationCanceled: "✅ Η συνδρομή σας ακυρώθηκε επιτυχώς!",
                notificationDarkMode: "🌙 Dark Mode ενεργοποιήθηκε!",
                notificationLightMode: "☀️ Light Mode ενεργοποιήθηκε!",
                // Stripe Payment Translations
                paymentTitle: "Ολοκλήρωση Πληρωμής",
                paymentSubtitle: "Εισάγετε τα στοιχεία της κάρτας σας για να ξεκινήσετε τη δωρεάν δοκιμή",
                paymentProcessing: "⏳ Επεξεργασία πληρωμής...",
                paymentSuccess: "✅ Η πληρωμή ολοκληρώθηκε επιτυχώς!",
                paymentError: "❌ Σφάλμα πληρωμής. Παρακαλώ δοκιμάστε ξανά.",
                paymentCancel: "Ακύρωση",
                paymentSubmit: "💳 Ξεκινήστε τη Δωρεάν Δοκιμή",
                securePayment: "🔒 Ασφαλής πληρωμή με κρυπτογράφηση SSL",
                // Footer Terms Translations
                terms_title: "Όροι Χρήσης",
                terms_section1: "Περιγραφή Υπηρεσίας",
                terms_desc1: "Αυτή η υπηρεσία παρέχει πρόσβαση σε premium περιεχόμενο έναντι μηνιαίας συνδρομής. Η υπηρεσία περιλαμβάνει δωρεάν δοκιμαστική περίοδο 3 ημερών.",
                terms_section2: "Όροι Πληρωμής",
                terms_desc2: "Η πληρωμή επεξεργάζεται μηνιαίως μέσω Stripe. Η συνδρομή θα ανανεώνεται αυτόματα εκτός αν ακυρωθεί πριν την ημερομηνία ανανέωσης.",
                terms_section3: "Πολιτική Ακύρωσης",
                terms_desc3: "Μπορείτε να ακυρώσετε τη συνδρομή σας οποιαδήποτε στιγμή. Δεν θα παρασχεθούν επιστροφές χρημάτων για μερική χρήση του μήνα.",
                terms_section4: "Ευθύνες Χρήστη",
                terms_desc4: "Οι χρήστες είναι υπεύθυνοι για τη διατήρηση της ασφάλειας του λογαριασμού και την τήρηση των κανόνων της κοινότητας.",
                privacy_title: "Πολιτική Απορρήτου",
                privacy_section1: "Συλλογή Δεδομένων",
                privacy_desc1: "Συλλέγουμε μόνο τις απαραίτητες πληροφορίες για την παροχή υπηρεσιών, συμπεριλαμβανομένου email, στοιχείων πληρωμής και αναλυτικών χρήσης.",
                privacy_section2: "Χρήση Δεδομένων",
                privacy_desc2: "Τα δεδομένα σας χρησιμοποιούνται αποκλειστικά για την παροχή υπηρεσιών, υποστήριξη πελατών και βελτίωση των προσφορών μας. Δεν πουλάμε προσωπικές πληροφορίες.",
                privacy_section3: "Ασφάλεια Δεδομένων",
                privacy_desc3: "Όλα τα δεδομένα κρυπτογραφούνται και αποθηκεύονται με ασφάλεια. Η επεξεργασία πληρωμών γίνεται από τη Stripe με μέτρα ασφαλείας βιομηχανικού επιπέδου.",
                privacy_section4: "Τα Δικαιώματά Σας",
                privacy_desc4: "Έχετε το δικαίωμα πρόσβασης, τροποποίησης ή διαγραφής των προσωπικών σας δεδομένων ανά πάσα στιγμή επικοινωνώντας με την ομάδα υποστήριξής μας.",
                refund_title: "Πολιτική Επιστροφών",
                refund_section1: "Γενική Πολιτική",
                refund_desc1: "Λόγω της ψηφιακής φύσης της υπηρεσίας μας, οι επιστροφές χρημάτων γενικά δεν παρέχονται μετά το τέλος της δωρεάν δοκιμαστικής περιόδου.",
                refund_section2: "Δοκιμαστική Περίοδος",
                refund_desc2: "Μπορείτε να ακυρώσετε κατά τη διάρκεια της 3ήμερης δωρεάν δοκιμής χωρίς χρεώσεις. Ακυρώστε πριν τελειώσει η δοκιμή για να αποφύγετε χρέωση.",
                refund_section3: "Ειδικές Περιστάσεις",
                refund_desc3: "Οι επιστροφές χρημάτων μπορεί να εξεταστούν σε εξαιρετικές περιστάσεις όπως τεχνικά προβλήματα που εμποδίζουν την πρόσβαση στην υπηρεσία.",
                refund_section4: "Επικοινωνία Υποστήριξης",
                refund_desc4: "Για αιτήματα επιστροφής χρημάτων, παρακαλώ επικοινωνήστε με την ομάδα υποστήριξής μας με τα στοιχεία της συνδρομής σας και τον λόγο του αιτήματος.",
                contact_title: "Επικοινωνία Υποστήριξης",
                contact_email: "Υποστήριξη Email",
                contact_response: "Απάντηση εντός 24 ωρών",
                contact_live: "Live Chat",
                contact_available: "Διαθέσιμο Δευτέρα-Παρασκευή 9πμ-6μμ EST",
                contact_start_chat: "Ξεκινήστε Chat",
                contact_phone: "Τηλεφωνική Υποστήριξη",
                contact_business: "Μόνο ώρες λειτουργίας",
                help_title: "Κέντρο Βοήθειας",
                help_billing: "💳 Χρεώσεις & Πληρωμές",
                help_billing_desc: "Προβλήματα πληρωμής, ερωτήσεις χρέωσης, διαχείριση συνδρομής",
                help_account: "👤 Διαχείριση Λογαριασμού",
                help_account_desc: "Προβλήματα σύνδεσης, επαναφορά κωδικού, ρυθμίσεις λογαριασμού",
                help_technical: "⚙️ Τεχνική Υποστήριξη",
                help_technical_desc: "Προβλήματα εφαρμογής, συμβατότητα browser, προβλήματα απόδοσης",
                help_general: "❓ Γενικές Ερωτήσεις",
                help_general_desc: "Πώς να χρησιμοποιήσετε τις δυνατότητες, ξεκινώντας, γενικές ερωτήσεις",
                faq_title: "Συχνές Ερωτήσεις",
                faq_q1: "Πώς ακυρώνω τη συνδρομή μου;",
                faq_a1: "Μπορείτε να ακυρώσετε ανά πάσα στιγμή κάνοντας κλικ στο κουμπί \"Ακύρωση Συνδρομής\" στις ρυθμίσεις του λογαριασμού σας ή επικοινωνώντας με την υποστήριξη.",
                faq_q2: "Πότε θα χρεωθώ;",
                faq_a2: "Θα χρεωθείτε μετά το τέλος της 3ήμερης δωρεάν δοκιμής, στη συνέχεια μηνιαίως την ίδια ημερομηνία κάθε μήνα.",
                faq_q3: "Μπορώ να αλλάξω τη μέθοδο πληρωμής μου;",
                faq_a3: "Ναι, μπορείτε να ενημερώσετε τη μέθοδο πληρωμής σας στις ρυθμίσεις του λογαριασμού σας ή να επικοινωνήσετε με την υποστήριξη για βοήθεια.",
                faq_q4: "Τι συμβαίνει αν αποτύχει η πληρωμή μου;",
                faq_a4: "Θα επαναλάβουμε την πληρωμή και θα σας στείλουμε ειδοποίηση. Η πρόσβασή σας θα διατηρηθεί για 48 ώρες για να ενημερώσετε τις πληροφορίες πληρωμής.",
                faq_q5: "Είναι ασφαλείς οι πληροφορίες πληρωμής μου;",
                faq_a5: "Ναι, όλες οι πληρωμές επεξεργάζονται με ασφάλεια μέσω Stripe με κρυπτογράφηση και μέτρα ασφαλείας βιομηχανικού επιπέδου.",
                chat_starting: "Ξεκινά το live chat...",
                chat_demo: "Live chat demo - Επικοινωνήστε με την υποστήριξη για πραγματική βοήθεια",
                faq_loading: "Φόρτωση τμήματος FAQ..."
            },
            en: {
                title: "Premium Subscription",
                subtitle: "Unlock all Business Tracker features",
                activeSubscription: "🎉 Your subscription is active!",
                expiresOn: "Expires on:",
                planName: "Business Pro",
                planPeriod: "per month",
                freeTrial: "🎁 3 Days Free Trial",
                feature1: "<strong>Smart AI Suggestions</strong> - Automatic data analysis and improvement recommendations",
                feature2: "<strong>Advanced Analytics</strong> - Detailed performance metrics and market analysis",
                feature3: "<strong>AI Predictions</strong> - Sales forecasts up to 24 months ahead",
                feature4: "<strong>Smart Goals</strong> - Automatic goal suggestions based on data",
                feature5: "<strong>Seasonality & Trends</strong> - Analysis of seasonal patterns and market dynamics",
                feature6: "<strong>Volatility Metrics</strong> - Risk monitoring and performance evaluation",
                feature7: "<strong>Risk Analysis</strong> - Risk level assessment and recovery rate estimation",
                feature8: "<strong>Unlimited Access</strong> - All features without restrictions",
                ctaButton: "🚀 Start Free Trial",
                cancelButton: "🗑️ Cancel Subscription",
                backButton: "← Back",
                terms: "By signing up you agree to the <span class='terms-link' onclick='showTermsModal()'>terms of use</span>. The free trial lasts 3 days. After the trial period expires you will be charged €12.99/month. You can cancel at any time.",
                activeSubscriptionStatus: "✅ Your Subscription is Active",
                confirmTrialTitle: "Start Free Trial",
                confirmTrialText: "Do you want to start the <strong>3-day</strong> free trial?<br>You will have full access to all premium features!",
                confirmTrialYes: "🚀 Yes, Let's Start!",
                confirmTrialNo: "Not now",
                cancelTitle: "Cancel Subscription",
                cancelText: "Are you sure you want to <strong>cancel</strong> your subscription?<br>You will lose access to all premium features.",
                cancelYes: "💔 Yes, Cancel",
                cancelNo: "💼 Keep Subscription",
                successTitle: "Welcome to Premium!",
                successText: "🚀 Your free trial has started!<br>✨ You have full access for <strong>3 days</strong>.<br>🔓 All premium features are now available!",
                successButton: "🎯 Go!",
                notificationWelcome: "🎉 Welcome to Premium! Your free trial has started!",
                notificationCanceled: "✅ Your subscription was successfully canceled!",
                notificationDarkMode: "🌙 Dark Mode activated!",
                notificationLightMode: "☀️ Light Mode activated!",
                // Stripe Payment Translations
                paymentTitle: "Complete Payment",
                paymentSubtitle: "Enter your card details to start your free trial",
                paymentProcessing: "⏳ Processing payment...",
                paymentSuccess: "✅ Payment completed successfully!",
                paymentError: "❌ Payment error. Please try again.",
                paymentCancel: "Cancel",
                paymentSubmit: "💳 Start Free Trial",
                securePayment: "🔒 Secure payment with SSL encryption",
                // Footer Terms Translations
                terms_title: "Terms of Use",
                terms_section1: "Service Description",
                terms_desc1: "This service provides premium content access for a monthly subscription fee. The service includes a 3-day free trial period.",
                terms_section2: "Payment Terms",
                terms_desc2: "Payment is processed monthly via Stripe. The subscription will automatically renew unless cancelled before the renewal date.",
                terms_section3: "Cancellation Policy",
                terms_desc3: "You may cancel your subscription at any time. No refunds will be provided for partial month usage.",
                terms_section4: "User Responsibilities",
                terms_desc4: "Users are responsible for maintaining account security and following community guidelines.",
                privacy_title: "Privacy Policy",
                privacy_section1: "Data Collection",
                privacy_desc1: "We collect only necessary information for service provision including email, payment information, and usage analytics.",
                privacy_section2: "Data Usage",
                privacy_desc2: "Your data is used solely for service delivery, customer support, and improving our offerings. We do not sell personal information.",
                privacy_section3: "Data Security",
                privacy_desc3: "All data is encrypted and stored securely. Payment processing is handled by Stripe with industry-standard security measures.",
                privacy_section4: "Your Rights",
                privacy_desc4: "You have the right to access, modify, or delete your personal data at any time by contacting our support team.",
                refund_title: "Refund Policy",
                refund_section1: "General Policy",
                refund_desc1: "Due to the digital nature of our service, refunds are generally not provided after the free trial period ends.",
                refund_section2: "Trial Period",
                refund_desc2: "You can cancel during the 3-day free trial without any charges. Cancel before the trial ends to avoid billing.",
                refund_section3: "Special Circumstances",
                refund_desc3: "Refunds may be considered in exceptional circumstances such as technical issues preventing service access.",
                refund_section4: "Contact Support",
                refund_desc4: "For refund requests, please contact our support team with your subscription details and reason for the request.",
                contact_title: "Contact Support",
                contact_email: "Email Support",
                contact_response: "Response within 24 hours",
                contact_live: "Live Chat",
                contact_available: "Available Monday-Friday 9AM-6PM EST",
                contact_start_chat: "Start Chat",
                contact_phone: "Phone Support",
                contact_business: "Business hours only",
                help_title: "Help Center",
                help_billing: "💳 Billing & Payments",
                help_billing_desc: "Payment issues, billing questions, subscription management",
                help_account: "👤 Account Management",
                help_account_desc: "Login issues, password reset, account settings",
                help_technical: "⚙️ Technical Support",
                help_technical_desc: "App issues, browser compatibility, performance problems",
                help_general: "❓ General Questions",
                help_general_desc: "How to use features, getting started, general inquiries",
                faq_title: "Frequently Asked Questions",
                faq_q1: "How do I cancel my subscription?",
                faq_a1: "You can cancel anytime by clicking the \"Cancel Subscription\" button in your account settings or by contacting support.",
                faq_q2: "When will I be charged?",
                faq_a2: "You will be charged after your 3-day free trial ends, then monthly on the same date each month.",
                faq_q3: "Can I change my payment method?",
                faq_a3: "Yes, you can update your payment method in your account settings or contact support for assistance.",
                faq_q4: "What happens if my payment fails?",
                faq_a4: "We will retry payment and send you a notification. Your access will be maintained for 48 hours to update payment information.",
                faq_q5: "Is my payment information secure?",
                faq_a5: "Yes, all payments are processed securely through Stripe with industry-standard encryption and security measures.",
                chat_starting: "Starting live chat...",
                chat_demo: "Live chat demo - Contact support for real assistance",
                faq_loading: "Loading FAQ section..."
            }
        };

        // Language Functions
        function initializeLanguage() {
            const savedLanguage = localStorage.getItem('language') || 'el';
            setLanguage(savedLanguage);
            
            // Listen for language changes from other tabs
            window.addEventListener('storage', function(e) {
                if (e.key === 'language') {
                    setLanguage(e.newValue);
                }
            });
        }

        function toggleLanguage() {
            const currentLang = localStorage.getItem('language') || 'el';
            const newLang = currentLang === 'el' ? 'en' : 'el';
            localStorage.setItem('language', newLang);
            setLanguage(newLang);
            
            // Show notification
            const message = newLang === 'el' ? '🇬🇷 Ελληνικά ενεργοποιήθηκαν!' : '🇺🇸 English activated!';
            showNotification(message, 'info', 2000);
        }

        function setLanguage(lang) {
            const elements = document.querySelectorAll('[data-translate]');
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[lang] && translations[lang][key]) {
                    element.innerHTML = translations[lang][key];
                }
            });
            
            // Update language toggle button
            const toggle = document.getElementById('languageToggle');
            toggle.textContent = lang === 'el' ? '🇺🇸' : '🇬🇷';
            toggle.title = lang === 'el' ? 'Switch to English' : 'Αλλαγή σε Ελληνικά';
            
            // Update document language
            document.documentElement.lang = lang;
            
            // Update title
            document.title = lang === 'el' ? 'Premium Συνδρομή - Business Tracker' : 'Premium Subscription - Business Tracker';
        }

        // Dark Mode Functionality
        function initializeDarkMode() {
            const savedDarkMode = localStorage.getItem('darkMode') === 'true';
            if (savedDarkMode) {
                document.body.classList.add('dark-mode');
                updateDarkModeButton();
            }
            
            // Listen for dark mode changes from other tabs
            window.addEventListener('storage', function(e) {
                if (e.key === 'darkMode') {
                    const isDarkMode = e.newValue === 'true';
                    if (isDarkMode) {
                        document.body.classList.add('dark-mode');
                    } else {
                        document.body.classList.remove('dark-mode');
                    }
                    updateDarkModeButton();
                }
            });
        }

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const isDarkMode = document.body.classList.contains('dark-mode');
            const currentLang = localStorage.getItem('language') || 'el';
            localStorage.setItem('darkMode', isDarkMode);
            updateDarkModeButton();
            
            // Show notification
            const message = isDarkMode ? translations[currentLang].notificationDarkMode : translations[currentLang].notificationLightMode;
            showNotification(message, 'info', 2000);
        }

        function updateDarkModeButton() {
            const toggle = document.getElementById('darkModeToggle');
            const isDarkMode = document.body.classList.contains('dark-mode');
            toggle.textContent = isDarkMode ? '☀️' : '🌙';
            toggle.title = isDarkMode ? 'Switch to Light Mode' : 'Switch to Dark Mode';
        }
        function showNotification(message, type = 'success', duration = 4000) {
            const notification = document.getElementById('notification');
            const icon = document.getElementById('notificationIcon');
            const text = document.getElementById('notificationText');
            
            // Set notification content
            text.textContent = message;
            
            // Set icon based on type
            const icons = {
                success: '🎉',
                error: '❌',
                warning: '⚠️',
                info: 'ℹ️'
            };
            icon.textContent = icons[type] || icons.success;
            
            // Set notification type class
            notification.className = `notification ${type}`;
            
            // Show notification
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            // Auto hide after duration
            setTimeout(() => {
                hideNotification();
            }, duration);
        }

        function hideNotification() {
            const notification = document.getElementById('notification');
            notification.classList.remove('show');
        }
        // Check current subscription status on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize language first
            initializeLanguage();
            
            // Initialize dark mode
            initializeDarkMode();
            
            // Then update subscription UI
            updateSubscriptionUI();
            
            // Listen for subscription updates from other tabs
            window.addEventListener('storage', function(e) {
                if (e.key === 'subscription' || e.key === 'subscriptionExpiry') {
                    updateSubscriptionUI();
                }
            });
        });

        function updateSubscriptionUI() {
            const subscription = localStorage.getItem('subscription');
            const expiry = localStorage.getItem('subscriptionExpiry');
            const statusDiv = document.getElementById('subscriptionStatus');
            const cancelBtn = document.getElementById('cancelBtn');
            const ctaBtn = document.querySelector('.cta-button');
            const currentLang = localStorage.getItem('language') || 'el';

            if (subscription && expiry) {
                const expiryDate = new Date(expiry);
                const now = new Date();
                
                if (expiryDate > now) {
                    // Active subscription
                    statusDiv.classList.add('active');
                    document.getElementById('expiryDate').textContent = expiryDate.toLocaleDateString(currentLang === 'el' ? 'el-GR' : 'en-US');
                    cancelBtn.style.display = 'block';
                    ctaBtn.textContent = translations[currentLang].activeSubscriptionStatus;
                    ctaBtn.style.background = '#27ae60';
                    ctaBtn.disabled = true;
                    return;
                }
            }

            // No active subscription
            statusDiv.classList.remove('active');
            cancelBtn.style.display = 'none';
            ctaBtn.textContent = translations[currentLang].ctaButton;
            ctaBtn.style.background = '';
            ctaBtn.disabled = false;
        }

        function startSubscription() {
            const currentLang = localStorage.getItem('language') || 'el';
            showPaymentModal(currentLang);
        }

        function showPaymentModal(lang) {
            // Create payment modal
            const paymentModal = document.createElement('div');
            paymentModal.className = 'payment-modal';
            paymentModal.id = 'paymentModal';
            
            paymentModal.innerHTML = `
                <div class="payment-container">
                    <div class="payment-header">
                        <h2 class="payment-title">${translations[lang].paymentTitle}</h2>
                        <p class="payment-subtitle">${translations[lang].paymentSubtitle}</p>
                    </div>
                    
                    <form id="payment-form">
                        <div id="payment-element" class="payment-element">
                            <!-- Stripe Elements will create form elements here -->
                        </div>
                        
                        <div class="secure-badge">
                            ${translations[lang].securePayment}
                        </div>
                        
                        <div class="payment-buttons">
                            <button type="submit" id="submit-payment" class="payment-submit">
                                ${translations[lang].paymentSubmit}
                            </button>
                            <button type="button" class="payment-cancel" onclick="closePaymentModal()">
                                ${translations[lang].paymentCancel}
                            </button>
                        </div>
                    </form>
                </div>
            `;
            
            document.body.appendChild(paymentModal);
            
            // Apply dark mode if active
            if (document.body.classList.contains('dark-mode')) {
                // Dark mode styles are handled by CSS
            }
            
            // Initialize Stripe payment form
            initializeStripePayment(lang);
        }

        async function initializeStripePayment(lang) {
            try {
                console.log('🚀 Initializing Stripe payment with backend integration...');
                
                // Show loading state
                const paymentElement = document.getElementById('payment-element');
                paymentElement.innerHTML = `
                  <div style="padding: 30px; text-align: center;">
                    <div style="font-size: 48px; margin-bottom: 15px;">🔄</div>
                    <h3 style="color: #667eea; margin-bottom: 10px;">Σύνδεση με server...</h3>
                    <p style="color: #6c757d; font-size: 14px;">Επικοινωνία με backend για ασφαλή πληρωμή</p>
                  </div>
                `;

                // Test backend connection
                const healthCheck = await fetch(`${BACKEND_CONFIG.baseUrl.replace('/api', '')}/health`);
                
                if (!healthCheck.ok) {
                    throw new Error(`Backend server δεν είναι διαθέσιμος (${healthCheck.status})`);
                }

                const healthData = await healthCheck.json();
                console.log('✅ Backend server connected:', healthData);

                // Initialize real Stripe Elements
                const appearance = {
                    theme: document.body.classList.contains('dark-mode') ? 'night' : 'stripe',
                    variables: {
                        colorPrimary: '#667eea',
                        colorBackground: document.body.classList.contains('dark-mode') ? '#34495e' : '#ffffff',
                        colorText: document.body.classList.contains('dark-mode') ? '#ffffff' : '#30313d',
                        fontFamily: 'Segoe UI, Tahoma, Geneva, Verdana, sans-serif',
                        spacingUnit: '4px',
                        borderRadius: '12px'
                    }
                };

                // Create Stripe Elements
                elements = stripe.elements({ appearance });
                paymentElement = elements.create('payment');

                // Show real payment form
                paymentElement.innerHTML = `
                  <div class="payment-header">
                    <div style="font-size: 48px; margin-bottom: 15px;">💳</div>
                    <h3 class="payment-title">${lang === 'el' ? 'Ασφαλής Πληρωμή' : 'Secure Payment'}</h3>
                    <p class="payment-subtitle">
                      ${lang === 'el' ? 'Συνδέθηκε με backend server για live πληρωμές' : 'Connected to backend server for live payments'}
                    </p>
                  </div>
                  <div id="payment-element-container"></div>
                  <div class="payment-buttons">
                    <button type="submit" id="payment-submit" class="payment-submit">
                      <span id="button-text">
                        ${lang === 'el' ? '🔒 Ασφαλής Πληρωμή €12.99' : '🔒 Secure Payment €12.99'}
                      </span>
                    </button>
                  </div>
                `;

                // Mount Stripe Elements
                paymentElement.mount('#payment-element-container');

                // Handle form submission
                const form = document.getElementById('payment-form');
                form.addEventListener('submit', handleBackendPaymentSubmit);

            } catch (error) {
                console.error('❌ Backend integration error:', error);
                
                // Show error message
                const paymentElement = document.getElementById('payment-element');
                paymentElement.innerHTML = `
                  <div style="padding: 30px; text-align: center; background: linear-gradient(135deg, #fee, #fdd); border-radius: 12px; border: 2px solid #e74c3c;">
                    <div style="font-size: 48px; margin-bottom: 15px;">⚠️</div>
                    <h3 style="color: #c0392b; margin-bottom: 10px;">Σφάλμα Σύνδεσης</h3>
                    <p style="color: #6c757d; font-size: 14px; margin-bottom: 15px;">
                      ${error.message}
                    </p>
                    <div style="background: #e74c3c; color: white; padding: 12px; border-radius: 8px; margin-bottom: 15px;">
                      <small style="font-weight: 600;">
                        🔧 Βεβαιωθείτε ότι ο backend server τρέχει στο http://localhost:3002
                      </small>
                    </div>
                    <button onclick="location.reload()" style="background: #3498db; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;">
                      🔄 Δοκιμή Ξανά
                    </button>
                  </div>
                `;
            }
        }

        async function handleBackendPaymentSubmit(event) {
            event.preventDefault();
            
            const submitButton = document.getElementById('payment-submit');
            const buttonText = document.getElementById('button-text');
            
            // Show loading state
            submitButton.disabled = true;
            buttonText.innerHTML = '🔄 Επεξεργασία...';
            
            try {
                console.log('💳 Creating payment intent via backend...');
                
                // Step 1: Create payment intent through backend
                const paymentResponse = await fetch(`${BACKEND_CONFIG.baseUrl}/payments/create-payment-intent`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        priceId: 'price_1RmsJyA1DFzFV9pRZIX920UB', // Your price ID
                        customerEmail: localStorage.getItem('userEmail') || 'customer@example.com',
                        trialDays: 3
                    })
                });

                if (!paymentResponse.ok) {
                    const errorData = await paymentResponse.json();
                    throw new Error(errorData.message || `HTTP ${paymentResponse.status}`);
                }

                const paymentData = await paymentResponse.json();
                console.log('✅ Payment intent created:', paymentData);

                // Step 2: Confirm payment with Stripe
                const { error, paymentIntent } = await stripe.confirmPayment({
                    elements,
                    clientSecret: paymentData.clientSecret,
                    confirmParams: {
                        return_url: window.location.origin + '/success.html',
                    },
                    redirect: 'if_required' // Stay on page if possible
                });

                if (error) {
                    throw new Error(error.message);
                }

                // Step 3: Handle successful payment
                if (paymentIntent.status === 'succeeded' || paymentIntent.status === 'requires_action') {
                    console.log('🎉 Payment successful!');
                    
                    // Store subscription data
                    localStorage.setItem('subscription', JSON.stringify({
                        id: paymentData.subscriptionId,
                        customerId: paymentData.customerId,
                        status: 'active',
                        trialEnd: paymentData.trialEnd,
                        amount: paymentData.amount,
                        currency: paymentData.currency
                    }));
                    
                    localStorage.setItem('subscriptionExpiry', paymentData.trialEnd || new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString());
                    
                    // Show success message
                    showSuccessMessage();
                    
                    // Broadcast to other tabs
                    broadcastSubscriptionUpdate();
                }

            } catch (error) {
                console.error('❌ Payment error:', error);
                
                // Show error notification
                showNotification(
                    `Σφάλμα πληρωμής: ${error.message}`, 
                    'error', 
                    5000
                );
                
            } finally {
                // Reset button
                submitButton.disabled = false;
                buttonText.innerHTML = '🔒 Ασφαλής Πληρωμή €12.99';
            }
        }

        async function initializeRealStripe(lang) {
            // Real Stripe Elements initialization
            const appearance = {
                theme: document.body.classList.contains('dark-mode') ? 'night' : 'stripe',
                variables: {
                    colorPrimary: '#667eea',
                    colorBackground: document.body.classList.contains('dark-mode') ? '#34495e' : '#ffffff',
                    colorText: document.body.classList.contains('dark-mode') ? '#ecf0f1' : '#2c3e50',
                    colorDanger: '#e74c3c',
                    fontFamily: 'Segoe UI, sans-serif',
                    spacingUnit: '4px',
                    borderRadius: '12px',
                }
            };

            // Initialize Stripe Elements
            elements = stripe.elements({
                appearance,
                clientSecret: 'pi_example_client_secret' // Get this from your backend
            });

            // Create and mount the Payment Element
            paymentElement = elements.create('payment');
            paymentElement.mount('#payment-element');

            // Handle real-time validation errors from the card Element
            paymentElement.on('change', ({error}) => {
                const displayError = document.getElementById('card-errors');
                if (error) {
                    displayError.textContent = error.message;
                } else {
                    displayError.textContent = '';
                }
            });
        }

        function simulatePayment(lang) {
            console.log('🎮 Simulating payment with live Stripe config...');
            
            // Show loading notification
            showNotification(translations[lang].paymentProcessing || 'Processing payment...', 'info', 2000);
            
            // Simulate payment processing
            setTimeout(async () => {
                try {
                    await processSuccessfulPayment(lang);
                    console.log('✅ Demo payment completed successfully');
                } catch (error) {
                    console.error('Demo payment error:', error);
                    showNotification(translations[lang].paymentError || 'Payment failed', 'error', 4000);
                }
            }, 2500);
        }

        async function handlePaymentSubmit(event) {
            event.preventDefault();
            const currentLang = localStorage.getItem('language') || 'el';
            const submitButton = document.getElementById('submit-payment');
            
            // Check if this is demo mode (no real Stripe Elements)
            const hasRealStripeElements = elements && paymentElement;
            
            // Show loading state
            submitButton.disabled = true;
            submitButton.innerHTML = `
                <div class="payment-loading">
                    <div class="payment-spinner"></div>
                    ${translations[currentLang].paymentProcessing}
                </div>
            `;
            
            try {
                if (!hasRealStripeElements) {
                    // Demo mode - simulate payment
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    await processSuccessfulPayment(currentLang);
                } else {
                    // Real Stripe payment (requires backend)
                    await processRealStripePayment(currentLang);
                }
                
            } catch (error) {
                console.error('Payment error:', error);
                showNotification(translations[currentLang].paymentError, 'error', 4000);
                
                // Reset button
                if (submitButton) {
                    submitButton.disabled = false;
                    submitButton.innerHTML = translations[currentLang].paymentSubmit;
                }
            }
        }

        async function processRealStripePayment(lang) {
            // Confirm payment with Stripe
            const {error, paymentIntent} = await stripe.confirmPayment({
                elements,
                confirmParams: {
                    return_url: window.location.href,
                },
                redirect: 'if_required'
            });

            if (error) {
                throw new Error(error.message);
            }

            if (paymentIntent.status === 'succeeded') {
                await processSuccessfulPayment(lang);
            } else {
                throw new Error('Payment not completed');
            }
        }

        async function processSuccessfulPayment(lang) {
            // Set subscription data
            const now = new Date();
            const expiry = new Date(now.getTime() + (3 * 24 * 60 * 60 * 1000)); // 3 days trial
            
            localStorage.setItem('subscription', 'pro');
            localStorage.setItem('subscriptionExpiry', expiry.toISOString());
            localStorage.setItem('subscriptionFeatures', JSON.stringify([
                'smart-suggestion',
                'advanced-analytics', 
                'ai-prediction'
            ]));
            
            // Close payment modal
            closePaymentModal();
            
            // Show success notification
            showNotification(translations[lang].notificationWelcome, 'success', 5000);
            
            // Show success animation
            createConfetti();
            setTimeout(() => {
                showSuccessMessage();
            }, 500);
            
            // Update UI
            updateSubscriptionUI();
            
            // Notify other tabs
            broadcastSubscriptionUpdate();
        }

        function closePaymentModal() {
            const modal = document.getElementById('paymentModal');
            if (modal) {
                modal.remove();
            }
        }

        // Backend Integration Example
        /*
        Example backend endpoint for creating PaymentIntent:
        
        POST /create-payment-intent
        {
            "priceId": "price_1234567890abcdef",
            "customerId": "cus_1234567890abcdef", // optional, for existing customers
            "trialDays": 3
        }
        
        Response:
        {
            "clientSecret": "pi_1234567890abcdef_secret_...",
            "customerId": "cus_1234567890abcdef"
        }
        
        Example webhook handler for subscription events:
        POST /stripe-webhook
        - subscription.created
        - subscription.updated  
        - subscription.deleted
        - invoice.payment_succeeded
        - invoice.payment_failed
        */

        function cancelSubscription() {
            const currentLang = localStorage.getItem('language') || 'el';
            
            // Enhanced cancellation confirmation
            const cancelOverlay = document.createElement('div');
            cancelOverlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.7);
                backdrop-filter: blur(5px);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10001;
                animation: fadeIn 0.3s ease;
            `;
            
            cancelOverlay.innerHTML = `
                <div class="cancel-dialog" style="
                    background: rgba(255, 255, 255, 0.95);
                    backdrop-filter: blur(20px);
                    padding: 40px;
                    border-radius: 25px;
                    text-align: center;
                    max-width: 450px;
                    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    animation: scaleIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
                ">
                    <div style="font-size: 60px; margin-bottom: 20px; animation: shake 0.5s ease;">😢</div>
                    <h3 class="dialog-title" style="color: #e74c3c; margin-bottom: 15px; font-size: 22px;">${translations[currentLang].cancelTitle}</h3>
                    <p class="dialog-text" style="color: #7f8c8d; margin-bottom: 30px; line-height: 1.5;">
                        ${translations[currentLang].cancelText}
                    </p>
                    <div style="display: flex; gap: 15px;">
                        <button onclick="confirmCancellation()" class="cancel-confirm-btn" style="
                            flex: 1;
                            background: linear-gradient(135deg, #e74c3c, #c0392b);
                            color: white;
                            border: none;
                            padding: 15px;
                            border-radius: 12px;
                            cursor: pointer;
                            font-weight: 600;
                            font-size: 16px;
                            transition: all 0.3s ease;
                        " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                            ${translations[currentLang].cancelYes}
                        </button>
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" class="keep-btn" style="
                            flex: 1;
                            background: linear-gradient(135deg, #667eea, #764ba2);
                            color: white;
                            border: none;
                            padding: 15px;
                            border-radius: 12px;
                            cursor: pointer;
                            font-weight: 600;
                            font-size: 16px;
                            transition: all 0.3s ease;
                        " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                            ${translations[currentLang].cancelNo}
                        </button>
                    </div>
                </div>
            `;
            
            // Add to document with dark mode support
            document.body.appendChild(cancelOverlay);
            
            // Apply dark mode styles if active
            if (document.body.classList.contains('dark-mode')) {
                const dialog = cancelOverlay.querySelector('.cancel-dialog');
                const title = cancelOverlay.querySelector('.dialog-title');
                const text = cancelOverlay.querySelector('.dialog-text');
                const keepBtn = cancelOverlay.querySelector('.keep-btn');
                
                dialog.style.background = 'rgba(52, 73, 94, 0.95)';
                dialog.style.border = '1px solid rgba(255, 255, 255, 0.1)';
                title.style.color = '#e74c3c';
                text.style.color = '#bdc3c7';
                
                keepBtn.style.background = 'linear-gradient(135deg, #3498db, #9b59b6)';
            }
            
            // Add global function for cancellation
            window.confirmCancellation = function() {
                // Clear subscription data
                localStorage.removeItem('subscription');
                localStorage.removeItem('subscriptionExpiry');
                localStorage.removeItem('subscriptionFeatures');
                
                // Remove overlay
                cancelOverlay.remove();
                
                // Show success notification
                showNotification(translations[currentLang].notificationCanceled, 'warning', 4000);
                
                // Update UI
                updateSubscriptionUI();
                
                // Notify other tabs
                broadcastSubscriptionUpdate();
            };
        }

        function goBack() {
            if (window.history.length > 1) {
                window.history.back();
            } else {
                window.location.href = 'dashboard.html';
            }
        }

        function createConfetti() {
            const colors = ['#667eea', '#764ba2', '#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3', '#54a0ff'];
            const shapes = ['●', '▲', '■', '♦', '★'];
            
            for (let i = 0; i < 150; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.innerHTML = shapes[Math.floor(Math.random() * shapes.length)];
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.color = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 3 + 's';
                    confetti.style.animationDuration = (Math.random() * 4 + 3) + 's';
                    confetti.style.fontSize = (Math.random() * 10 + 10) + 'px';
                    confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                    
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 8000);
                }, i * 20);
            }
        }

        function showSuccessMessage() {
            const currentLang = localStorage.getItem('language') || 'el';
            
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                backdrop-filter: blur(10px);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10001;
                animation: fadeIn 0.5s ease;
            `;
            
            overlay.innerHTML = `
                <div class="success-dialog" style="
                    background: rgba(255, 255, 255, 0.95);
                    backdrop-filter: blur(20px);
                    padding: 50px;
                    border-radius: 25px;
                    text-align: center;
                    max-width: 500px;
                    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    animation: scaleIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
                ">
                    <div style="
                        font-size: 80px; 
                        margin-bottom: 25px; 
                        animation: bounce 1.5s ease infinite;
                        filter: drop-shadow(0 5px 15px rgba(0,0,0,0.1));
                    ">🎉</div>
                    <h2 class="success-title" style="
                        background: linear-gradient(135deg, #667eea, #764ba2);
                        -webkit-background-clip: text;
                        -webkit-text-fill-color: transparent;
                        background-clip: text;
                        margin-bottom: 20px; 
                        font-size: 28px;
                        font-weight: 800;
                    ">${translations[currentLang].successTitle}</h2>
                    <p class="success-text" style="
                        color: #7f8c8d; 
                        margin-bottom: 30px; 
                        font-size: 16px;
                        line-height: 1.6;
                    ">
                        ${translations[currentLang].successText}
                    </p>
                    <button onclick="this.parentElement.parentElement.remove(); window.location.href='dashboard.html';" class="success-btn" style="
                        background: linear-gradient(135deg, #667eea, #764ba2);
                        color: white;
                        border: none;
                        padding: 15px 40px;
                        border-radius: 50px;
                        cursor: pointer;
                        font-weight: 700;
                        font-size: 16px;
                        box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
                        transition: all 0.3s ease;
                        text-transform: uppercase;
                        letter-spacing: 0.5px;
                    " onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 15px 35px rgba(102, 126, 234, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 10px 25px rgba(102, 126, 234, 0.3)'">
                        ${translations[currentLang].successButton}
                    </button>
                </div>
            `;
            
            document.body.appendChild(overlay);
            
            // Apply dark mode styles if active
            if (document.body.classList.contains('dark-mode')) {
                const dialog = overlay.querySelector('.success-dialog');
                const title = overlay.querySelector('.success-title');
                const text = overlay.querySelector('.success-text');
                const btn = overlay.querySelector('.success-btn');
                
                dialog.style.background = 'rgba(52, 73, 94, 0.95)';
                dialog.style.border = '1px solid rgba(255, 255, 255, 0.1)';
                title.style.background = 'linear-gradient(135deg, #3498db, #9b59b6)';
                title.style.webkitBackgroundClip = 'text';
                title.style.webkitTextFillColor = 'transparent';
                text.style.color = '#bdc3c7';
                btn.style.background = 'linear-gradient(135deg, #3498db, #9b59b6)';
                btn.style.boxShadow = '0 10px 25px rgba(52, 152, 219, 0.3)';
            }
        }

        function broadcastSubscriptionUpdate() {
            // Notify parent window if opened from dashboard
            if (window.opener) {
                window.opener.postMessage({
                    type: 'subscription-updated',
                    subscription: localStorage.getItem('subscription'),
                    expiry: localStorage.getItem('subscriptionExpiry')
                }, '*');
            }
        }

        // Listen for messages from dashboard
        window.addEventListener('message', function(event) {
            if (event.data.type === 'check-subscription') {
                updateSubscriptionUI();
            }
        });

        // Add CSS animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; transform: scale(0.9); }
                to { opacity: 1; transform: scale(1); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
